namespace Olive{
   
     export default class DataHandler{
     
         static getPostData(trigger: JQuery): JQuerySerializeArrayElement[] {
               
              var form = trigger.closest("[data-module]");

              if (!form.is("form")) form = $("<form />").append(form.clone(true));

              var data = urlHelper.mergeFormData(form.serializeArray());



              // If it's master-details, then we need the index.

              var subFormContainer = trigger.closest(".subform-item");

              if (subFormContainer != null) {

                  data.push({

                      name: "subFormIndex",

                      value: subFormContainer.closest(".horizontal-subform, .vertical-subform").find(".subform-item").index(subFormContainer).toString()

                  });

              }

              data.push({ name: "current.request.url", value: urlHelper.pathAndQuery() });

              return data;

          }
     }
}
